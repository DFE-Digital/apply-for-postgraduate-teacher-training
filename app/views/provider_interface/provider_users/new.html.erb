<% content_for :title, 'Invite user' %>

<% content_for :before_content do %>
  <div class="govuk-breadcrumbs">
    <ol class="govuk-breadcrumbs__list">
      <li class="govuk-breadcrumbs__list-item">
        <%= link_to 'Users', provider_interface_provider_users_path, class: 'govuk-breadcrumbs__link' %>
      </li>
      <li class="govuk-breadcrumbs__list-item" aria-current="page">
        Invite user
      </li>
    </ol>
  </div>
<% end %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <%= form_with model: @form, url: provider_interface_provider_users_path do |f| %>
      <%= f.govuk_error_summary %>

      <h1 class='govuk-heading-xl'>Invite user</h1>

      <%= f.govuk_text_field :first_name, label: { text: 'First name', size: 'm' } %>
      <%= f.govuk_text_field :last_name, label: { text: 'Last name', size: 'm' } %>
      <%= f.govuk_text_field :email_address, label: { text: 'Email address', size: 'm' } %>

      <% f.object.forms_for_possible_permissions.each do |permission_form| %>
        <%= f.fields_for "provider_permissions_forms[]", permission_form do |pf| %>
          <%= pf.govuk_check_box :active, true, multiple: false,
                                 label: { text: permission_form.provider.name_and_code } do %>
            <%= pf.fields_for :provider_permission, permission_form.provider_permission do |ppf| %>
              <%= ppf.hidden_field :provider_id %>
            <% end %>
          <% end %>
        <% end %>
      <% end %>

      <%= f.govuk_submit 'Invite user' %>
    <% end %>
  </div>
</div>
