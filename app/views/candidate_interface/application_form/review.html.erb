<% content_for :title, title_with_error_prefix(t('review_application.title'), @errors && @errors.any?) %>
<% content_for :before_content, govuk_back_link_to(candidate_interface_application_form_path) %>

<% if !@errors.nil? || !@application_choice_errors.nil? %>
  <div class="govuk-error-summary" tabindex="-1" role="alert" data-module="govuk-error-summary" aria-labelledby="error-summary-title">
    <h2 id="error-summary-title" class="govuk-error-summary__title">
      There is a problem
    </h2>
    <div class="govuk-error-summary__body">
      <ul class="govuk-list govuk-error-summary__list">
        <% @errors.each do |section| %>
          <li>
            <a href="<%= "#missing-#{section}-error" %>"><%= t("review_application.#{section}.incomplete", minimum_references: ApplicationForm::MINIMUM_COMPLETE_REFERENCES) %></a>
          </li>
        <% end %>

        <% @application_choice_errors.each do |error| %>
          <li><%= link_to error.message, error.anchor %></li>
        <% end %>
      </ul>
    </div>
  </div>
<% end %>

<h1 class="govuk-heading-xl">
  <%= t('review_application.heading') %>
</h1>

<%= render 'review', application_form: @application_form, editable: true %>

<% if FeatureFlag.active?('equality_and_diversity') %>
  <%= govuk_button_link_to t('review_application.button_continue'), candidate_interface_start_equality_and_diversity_path %>
<% else %>
  <%= govuk_button_link_to t('review_application.button_continue'), candidate_interface_application_submit_show_path %>
<% end %>
