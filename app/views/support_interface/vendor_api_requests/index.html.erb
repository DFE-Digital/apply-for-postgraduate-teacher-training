<% content_for :title, 'Vendor API Requests' %>

<%= render PaginatedFilterComponent.new(filter: @filter, collection: @vendor_api_requests) do %>
  <table class="govuk-table">
    <thead class="govuk-table__head">
      <tr class="govuk-table__row">
        <th class="govuk-table__header govuk-table__header govuk-!-width-one-quarter">Time</th>
        <th class="govuk-table__header govuk-table__header govuk-!-width-one-quarter">Status</th>
        <th class="govuk-table__header govuk-table__header govuk-!-width-one-half">Path</th>
      </tr>
    </thead>
    <tbody class="govuk-table__body">
      <% @vendor_api_requests.each do |vendor_api_request| %>
        <tr class="govuk-table__row">
          <td class="govuk-table__cell">
            <%= vendor_api_request.created_at.to_s(:govuk_date_and_time) %>
          </td>
          <td class="govuk-table__cell">
            <%= vendor_api_request.status_code %>
          </td>
          <td class="govuk-table__cell">
            <details class="govuk-details" data-module="govuk-details">
              <summary class="govuk-details__summary">
                <span class="govuk-details__summary-text">
                  <%= vendor_api_request.request_path %>
                </span>
              </summary>
              <div class="govuk-details__text">
                <%= tag.pre(vendor_api_request.response_body) %>
              </div>
            </details>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>
