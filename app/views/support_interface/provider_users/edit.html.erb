<% content_for :browser_title, title_with_error_prefix("Edit - #{@form.provider_user.full_name}", @form.errors.any?) %>

<%= render 'support_interface/providers/providers_navigation', current: 'Provider users' %>

<%= render 'provider_user_navigation', current: 'Details' %>

<%= form_with model: @form, url: support_interface_provider_user_path(@form.provider_user) do |f| %>
  <%= f.govuk_error_summary %>

  <%= render SummaryListComponent.new(rows: {
    'First name' => @form.provider_user.first_name,
    'Last name' => @form.provider_user.last_name,
    'Email address' => @form.provider_user.email_address,
    'DfE Sign-in UID' => @form.provider_user.dfe_sign_in_uid,
    'Account created at' => @form.provider_user.created_at.to_s(:govuk_date_and_time),
    'Last sign in at' => @form.provider_user.last_signed_in_at&.to_s(:govuk_date_and_time) || 'Not signed in yet',
  }) %>

  <%= render 'provider_options', f: f %>

  <%= f.govuk_submit 'Update user' %>
<% end %>
