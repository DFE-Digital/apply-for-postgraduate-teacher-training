<% content_for :before_content do %>
  <div class="govuk-breadcrumbs">
    <ol class="govuk-breadcrumbs__list">
      <li class="govuk-breadcrumbs__list-item">
        <%= link_to 'Users', support_interface_users_path, class: 'govuk-breadcrumbs__link' %>
      </li>
      <li class="govuk-breadcrumbs__list-item" aria-current="page">
        <%= link_to 'Provider users', support_interface_provider_users_path, class: 'govuk-breadcrumbs__link' %>
      </li>
      <li class="govuk-breadcrumbs__list-item" aria-current="page">
        Edit provider user
      </li>
    </ol>
  </div>
<% end %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <%= form_with model: @form, url: support_interface_provider_user_path(@form.provider_user) do |f| %>
      <%= f.govuk_error_summary %>

      <h1 class='govuk-heading-xl'>
        Edit provider user
      </h1>

      <% if @form.provider_user.dfe_sign_in_uid.present? %>
        <%= f.govuk_text_field :email_address, label: { text: 'Email address', size: 'm' } %>
      <% else %>
        <%= f.govuk_text_field :email_address, label: { text: 'Email address', size: 'm' }, disabled: true, hint_text: 'The email address is not editable until the user has signed in for the first time. This is to ensure it continues to match the email on their DfE Sign-in invitation' %>
      <% end %>
      <%= f.govuk_text_field :first_name, label: { text: 'First name' } %>
      <%= f.govuk_text_field :last_name, label: { text: 'Last name' } %>

      <%= f.govuk_collection_check_boxes :provider_ids, @form.available_providers, :id, :name_and_code, legend: { text: 'Provider' }, classes: 'app-checkboxes-scroll' %>

      <%= f.govuk_check_box :manage_users, @form.manage_users, label: { text: 'Allow this user to invite others' } %>

      <%= f.govuk_submit 'Update user' %>
    <% end %>
  </div>
</div>
