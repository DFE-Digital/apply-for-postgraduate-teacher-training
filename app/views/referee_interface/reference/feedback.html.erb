<% content_for :title, title_with_error_prefix("Your reference for #{@application.full_name}", @reference_form.errors.any?) %>
<% if FeatureFlag.active?('referee_confirm_relationship_and_safeguarding') %>
  <% content_for :before_content, govuk_back_link_to(referee_interface_safeguarding_path(token: @token_param)) %>
<% end %>

<%= form_with model: @reference_form, url: referee_interface_submit_feedback_path(token: @token_param), method: :patch do |f| %>
  <%= f.govuk_error_summary %>
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-xl">Your reference for <%= @application.full_name %></h1>

      <%= render(RefereeInterface::FeedbackHintsComponent.new(reference: @reference_form.reference)) %>

      <%= f.govuk_text_area :feedback, label: { text: 'Your reference', size: 'm' }, max_words: 300, rows: 15 %>

      <% if FeatureFlag.active?('referee_confirm_relationship_and_safeguarding') %>
         <%= f.govuk_submit 'Continue' %>
      <% else %>
        <%= f.govuk_submit t('reference_form.confirm') %>
      <% end %>
    </div>
  </div>
<% end %>
