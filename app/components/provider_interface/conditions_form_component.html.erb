<%= form_with model: form_object, url: provider_interface_application_choice_offer_conditions_path(application_choice), method: method do |f| %>
  <%= f.govuk_error_summary %>

  <h1 class="govuk-heading-l">
    <span class="govuk-caption-l"><%= application_choice.application_form.full_name %></span>
    <%= form_heading %>
  </h1>

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <%= f.govuk_collection_check_boxes(:standard_conditions,
                                         standard_conditions_checkboxes,
                                         :id,
                                         :name,
                                         legend: { size: 'm' }) %>

      <%= f.govuk_fieldset(
        legend: {
          text: t('.further_conditions'),
          class: 'govuk-heading-m govuk-!-margin-bottom-1 app-add-another__heading',
          tabindex: '-1',
        },
      ) do %>
        <p class="govuk-body">For example, studying a subject knowledge enhancement course.</p>

        <% form_object.condition_models.each do |model| %>
          <%= f.fields_for 'further_conditions[]', model do |fc| %>
            <div class="app-add-another__item">
              <%= fc.govuk_text_area :text, label: { text: t('.condition', label: model.id + 1), size: 's' }, rows: 3 %>
              <%= f.button name: 'remove_condition', value: model.id, class: 'govuk-button govuk-button--secondary app-add-another__remove-button' do %>
                <%= t('.remove') %> <span class="govuk-visually-hidden"> <%= t('.condition', label: model.id + 1).downcase %></span>
              <% end %>
            </div>
          <% end %>
        <% end %>

        <% if form_object.condition_models.length < 20 %>
          <%= f.button name: 'commit', value: 'add_another_condition', class: 'govuk-button govuk-button--secondary app-add-another__add-button govuk-!-margin-bottom-4' do %>
            <%= t('.add_another') %>
          <% end %>
        <% end %>
      <% end %>

      <%= f.govuk_submit t('continue') %>

      <p class="govuk-body">
        <%= govuk_link_to t('cancel'), provider_interface_application_choice_path(application_choice), class: 'govuk-link--no-visited-state' %>
      </p>
    </div>
  </div>
<% end %>
